{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/anujjha/Desktop/MovieApp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";// import {movies} from \"../movieData\";\nimport axios from'axios';import'./MovieList.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MovieList=/*#__PURE__*/function(_Component){_inherits(MovieList,_Component);var _super=_createSuper(MovieList);function MovieList(){var _this;_classCallCheck(this,MovieList);_this=_super.call(this);_this.changeMovies=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.themoviedb.org/3/movie/popular?api_key=81242a2aa2066e052c78ec9ac1700c59&language=en-US&page=\".concat(_this.state.currPage));case 2:res=_context.sent;console.log(res.data);_this.setState({movies:_toConsumableArray(res.data.results)});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleNext=function(){if(_this.state.currPage==_this.state.pArr.length){_this.setState({pArr:[].concat(_toConsumableArray(_this.state.pArr),[_this.state.pArr.length+1]),currPage:_this.state.currPage+1},_this.changeMovies);}};_this.handlePrevious=function(){if(_this.state.currPage!=1){//edgecase when currpage=1 not able to do previous calls\n_this.setState({currPage:_this.state.currPage-1},_this.changeMovies);}};_this.handlePageClick=function(ele){if(ele!=_this.state.currPage){_this.setState({currPage:ele},_this.changeMovies);}};_this.handleFavourites=function(movieObj){var oldData=JSON.parse(localStorage.getItem('movies-app')||'[]');if(_this.state.favourites.includes(movieObj.id)){oldData=oldData.filter(function(movie){return movie.id!=movieObj.id;});}else{oldData.push(movieObj);}localStorage.setItem(\"movies-app\",JSON.stringify(oldData));_this.handleFavouritesState();};_this.handleFavouritesState=function(){var oldData=JSON.parse(localStorage.getItem('movies-app')||'[]');var temp=oldData.map(function(movie){return movie.id;});_this.setState({favourites:_toConsumableArray(temp)});};_this.state={hover:\"\",pArr:[1],movies:[],currPage:1,favourites:[]};return _this;}_createClass(MovieList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"Component Did Mount\");_context2.next=3;return axios.get('https://api.themoviedb.org/3/movie/popular?api_key=11b4db041bf33bf9932e58398b21c951&language=en-US&page=1');case 3:res=_context2.sent;console.log(res.data);this.setState({movies:_toConsumableArray(res.data.results)});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;// let moviesArr = movies.results\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"header\",id:\"pageOne\",children:/*#__PURE__*/_jsxs(\"h2\",{class:\"heading\",children:[\"All Trending and Best IMDB Rated Movies \",/*#__PURE__*/_jsx(\"span\",{class:\"highlight\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-list\",children:this.state.movies.map(function(movieEle){return/*#__PURE__*/_jsxs(\"div\",{className:\"card movie-card\",onMouseEnter:function onMouseEnter(){return _this2.setState({hover:movieEle.id});},onMouseLeave:function onMouseLeave(){return _this2.setState({hover:\"\"});},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/original\".concat(movieEle.backdrop_path),style:{height:'40vh',width:'20vw'},className:\"card-img-top movie-img\",alt:\"...\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title movie-title\",children:movieEle.title}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:\"center\"},children:_this2.state.hover==movieEle.id&&/*#__PURE__*/_jsx(\"a\",{type:\"button\",className:\"btn btn-primary movies-button\",onClick:function onClick(){return _this2.handleFavourites(movieEle);},children:_this2.state.favourites.includes(movieEle.id)?\"Remove from Favourites\":\"Add to Favourites\"})})]});})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:this.handlePrevious,children:\"Previous\"})}),this.state.pArr.map(function(ele){return/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:function onClick(){return _this2.handlePageClick(ele);},children:ele})});}),/*#__PURE__*/_jsx(\"li\",{className:\"page-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:this.handleNext,children:\"Next\"})})]})})})]});}}]);return MovieList;}(Component);export default MovieList;","map":{"version":3,"names":["Component","axios","MovieList","changeMovies","get","state","currPage","res","console","log","data","setState","movies","results","handleNext","pArr","length","handlePrevious","handlePageClick","ele","handleFavourites","movieObj","oldData","JSON","parse","localStorage","getItem","favourites","includes","id","filter","movie","push","setItem","stringify","handleFavouritesState","temp","map","hover","movieEle","backdrop_path","height","width","title","display","justifyContent"],"sources":["/Users/anujjha/Desktop/MovieApp/src/component/MovieList.js"],"sourcesContent":["import { Component } from \"react\";\n// import {movies} from \"../movieData\";\nimport axios from 'axios';\nimport './MovieList.css';\n\nclass MovieList extends Component{\n\n    constructor(){\n        super();\n        this.state={\n            hover:\"\",\n            pArr:[1],\n            movies:[],\n            currPage:1,\n            favourites:[]\n        };\n    }\n\n    async componentDidMount(){\n        console.log(\"Component Did Mount\");\n        const res = await axios.get('https://api.themoviedb.org/3/movie/popular?api_key=11b4db041bf33bf9932e58398b21c951&language=en-US&page=1')\n        console.log(res.data);\n        this.setState({\n            movies:[...res.data.results]\n        })\n    }\n\n\n    changeMovies = async()=>{\n        const res = await axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=81242a2aa2066e052c78ec9ac1700c59&language=en-US&page=${this.state.currPage}`)\n        console.log(res.data);\n        this.setState({\n            movies:[...res.data.results]\n        })\n    }\n\n\n    handleNext=()=>{\n        if(this.state.currPage==this.state.pArr.length){\n            this.setState({\n            \n                    pArr:[...this.state.pArr,this.state.pArr.length+1],\n                    currPage:this.state.currPage+1\n            \n            },this.changeMovies)\n\n        }\n    }\n\n    handlePrevious=()=>{\n        if(this.state.currPage!=1){   //edgecase when currpage=1 not able to do previous calls\n            this.setState({\n                currPage:this.state.currPage-1,\n            },this.changeMovies)\n        }\n        \n    }\n\n    handlePageClick=(ele)=>{\n        if(ele!=this.state.currPage){\n            this.setState({\n                currPage: ele\n            },this.changeMovies);\n        }\n    }\n\n     handleFavourites = (movieObj)=>{\n        let oldData = JSON.parse(localStorage.getItem('movies-app') || '[]')\n        if(this.state.favourites.includes(movieObj.id)){\n            oldData = oldData.filter((movie)=>movie.id!=movieObj.id)\n        }else{\n            oldData.push(movieObj)\n        }\n        localStorage.setItem(\"movies-app\",JSON.stringify(oldData));\n        this.handleFavouritesState();\n    }\n\n    handleFavouritesState = ()=>{\n        let oldData = JSON.parse(localStorage.getItem('movies-app')|| '[]')\n        let temp = oldData.map((movie)=>movie.id);\n        this.setState({\n            favourites:[...temp]\n        })\n    }\n    render(){\n        // let moviesArr = movies.results\n        return(\n            <>\n            <div class=\"header\" id=\"pageOne\">\n                <h2 class=\"heading\">All Trending and Best IMDB Rated Movies <span class=\"highlight\"></span></h2>\n            </div>\n           \n            <div className=\"movies-list\">\n                    {this.state.movies.map((movieEle) => (\n                        <div className=\"card movie-card\" onMouseEnter={()=>this.setState({hover:movieEle.id})} onMouseLeave={()=>this.setState({hover:\"\"})} >\n                            <img src={`https://image.tmdb.org/t/p/original${movieEle.backdrop_path}`} style={{ height: '40vh', width: '20vw' }} className=\"card-img-top movie-img\" alt=\"...\" />\n                            <h5 className=\"card-title movie-title\">{movieEle.title}</h5>\n                            <div style={{ display: 'flex', justifyContent: \"center\" }}>\n                                {this.state.hover == movieEle.id && (\n                                    <a type=\"button\" className=\"btn btn-primary movies-button\" onClick={()=>this.handleFavourites(movieEle)}>\n                                    {this.state.favourites.includes(movieEle.id)?\"Remove from Favourites\":\"Add to Favourites\"}\n                                </a>)}\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            <div style={{display:\"flex\",justifyContent:\"center\"}}>\n                <nav aria-label=\"Page navigation example\">\n                    <ul className=\"pagination\">\n                        <li className=\"page-item\"><button className=\"page-link\" onClick={this.handlePrevious}>Previous</button></li>\n                        {this.state.pArr.map((ele)=>(\n                            <li className=\"page-item\" ><button className=\"page-link\" onClick={()=>this.handlePageClick(ele)}  >{ele}</button></li>\n                        ))}\n                        \n                        <li className=\"page-item\"><button className=\"page-link\" onClick={this.handleNext}>Next</button></li>\n                    </ul>\n                </nav>\n                </div>\n            </>\n        )\n    }\n}\n\nexport default MovieList"],"mappings":"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"},"metadata":{},"sourceType":"module"}